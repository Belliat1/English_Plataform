(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3934],{501:(e,r,t)=>{Promise.resolve().then(t.bind(t,7107))},5695:(e,r,t)=>{"use strict";var a=t(8999);t.o(a,"useParams")&&t.d(r,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(r,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(r,{useSearchParams:function(){return a.useSearchParams}})},7107:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>i});var a=t(5155),s=t(2115),o=t(5695),n=t(2108);let l={Principiante:[{id:1,question:"\xbfCu\xe1l es la forma correcta del verbo 'to be' para 'I'?",options:["is","are","am","be"],correctAnswer:"am"},{id:2,question:"\xbfQu\xe9 palabra en ingl\xe9s significa 'Gracias'?",options:["Hello","Goodbye","Please","Thanks"],correctAnswer:"Thanks",audioUrl:"/assets/audio/thanks.mp3"},{id:3,question:"Selecciona la imagen que representa la palabra 'Apple'.",options:["Manzana","Pl\xe1tano","Naranja","Uva"],correctAnswer:"Manzana",imageUrl:"/assets/img/apple-example.png"}],Intermedio:[{id:1,question:"\xbfCu\xe1l es la forma correcta del pasado de 'go'?",options:["goes","goed","went","go"],correctAnswer:"went"},{id:2,question:"Elige el conector adecuado: 'I was tired ___ I went to bed.'",options:["but","so","because","and"],correctAnswer:"so"}],Avanzado:[{id:1,question:"Which sentence is in present perfect?",options:["I go to the store.","I have gone to the store.","I will go to the store.","I went to the store."],correctAnswer:"I have gone to the store."},{id:2,question:"\xbfCu\xe1l es el sin\xf3nimo de 'purchase'?",options:["buy","sell","break","cook"],correctAnswer:"buy",videoUrl:"/assets/video/purchase.mp4"}]},i=()=>{var e,r,t,i,c;let{data:u}=(0,n.useSession)(),{levelTitle:d}=(0,o.useParams)(),m=(0,o.useRouter)(),[p,h]=(0,s.useState)([]),[g,b]=(0,s.useState)(0),[x,v]=(0,s.useState)({}),[f,w]=(0,s.useState)(null),[y,N]=(0,s.useState)(!0),[j,k]=(0,s.useState)(null),P=Array.isArray(d)?d[0]:d,C=null==P?void 0:P.toLowerCase().replace(/^\w/,e=>e.toUpperCase());(0,s.useEffect)(()=>{C&&l[C]?h(l[C]):(console.error("❌ No se encontraron preguntas para el nivel ".concat(C)),h([])),N(!1)},[C]),(0,s.useEffect)(()=>{var e;let r=null==(e=p[g])?void 0:e.audioUrl;if(r){let e=new Audio(r);return k(e),e.play().catch(e=>{console.warn("\uD83D\uDD07 No se pudo reproducir el audio:",e)}),()=>{e.pause(),e.currentTime=0}}},[g,p]),(0,s.useEffect)(()=>{var e;null!==f&&f>=8&&(null==u||null==(e=u.user)?void 0:e.email)&&fetch("/api/certificates/unlock",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userEmail:u.user.email,level:C,score:f})}).then(e=>e.json()).then(e=>console.log("✅ Certificado desbloqueado:",e)).catch(e=>console.error("❌ Error al registrar certificado:",e))},[f,u,C]);let A=e=>{v(r=>({...r,[g]:e}))},S=()=>{let e=0;p.forEach((r,t)=>{x[t]===r.correctAnswer&&e++}),w(e/p.length*10)};return(0,a.jsxs)("div",{className:"p-6 min-h-screen flex flex-col items-center bg-[var(--background-1)]",children:[(0,a.jsx)("button",{onClick:()=>m.back(),className:"absolute top-4 left-4 px-4 py-2 bg-[var(--background-3)] text-sm rounded hover:opacity-80",children:"⬅ Volver"}),(0,a.jsxs)("h1",{className:"text-2xl font-bold text-center mt-4 text-[var(--primary-color)]",children:["Examen del Nivel: ",C]}),y?(0,a.jsx)("p",{className:"text-center text-gray-500",children:"Cargando preguntas..."}):0===p.length?(0,a.jsx)("p",{className:"text-center text-[var(--danger)] font-semibold",children:"⚠️ No hay preguntas disponibles para este nivel."}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{className:"text-right text-gray-500 mt-2 mb-2",children:["Pregunta ",g+1," de ",p.length]}),(0,a.jsxs)("div",{className:"w-full max-w-lg bg-[var(--background-2)] rounded shadow p-6",children:[(0,a.jsx)("p",{className:"text-lg text-center mb-4 font-medium text-[var(--color-primary-900)]",children:(null==(e=p[g])?void 0:e.question)||"Pregunta sin t\xedtulo"}),(null==(r=p[g])?void 0:r.audioUrl)&&(0,a.jsx)("div",{className:"flex justify-center mb-4",children:(0,a.jsx)("button",{onClick:()=>{j&&(j.currentTime=0,j.play())},className:"px-4 py-2 bg-[var(--background-3)] rounded text-sm",children:"\uD83D\uDD01 Reproducir Audio"})}),(null==(t=p[g])?void 0:t.imageUrl)&&(0,a.jsx)("div",{className:"flex justify-center mb-4",children:(0,a.jsx)("img",{src:p[g].imageUrl,alt:"Imagen",className:"max-h-56 object-contain rounded border"})}),null==(c=p[g])||null==(i=c.options)?void 0:i.map((e,r)=>{let t=x[g]===e;return(0,a.jsx)("button",{onClick:()=>A(e),className:"block w-full text-left p-3 rounded border mb-2 transition ".concat(t?"bg-[var(--primary-color)] text-white border-[var(--primary-color)]":"bg-white text-gray-800 hover:bg-[var(--background-3)] border-gray-300"),children:e},r)})]}),(0,a.jsxs)("div",{className:"flex justify-between mt-6 w-full max-w-lg",children:[(0,a.jsx)("button",{onClick:()=>{g>0&&b(g-1)},disabled:0===g,className:"px-4 py-2 border rounded",children:"Anterior"}),(0,a.jsx)("button",{onClick:()=>{if(!x[g])return void alert("Por favor, selecciona una respuesta.");g<p.length-1?b(g+1):S()},className:"px-4 py-2 bg-[var(--primary-color)] text-white rounded",children:g===p.length-1?"Finalizar":"Siguiente"})]}),null!==f&&(0,a.jsxs)("p",{className:"mt-6 text-lg font-semibold text-center text-[var(--success)]",children:["\uD83C\uDF89 Tu puntuaci\xf3n: ",f.toFixed(1)," / 10"]})]})]})}}},e=>{var r=r=>e(e.s=r);e.O(0,[2108,8441,1684,7358],()=>r(501)),_N_E=e.O()}]);